{% load static %}
{% include 'loggedin_nav.html' %}
        <!--offcanvas menu end-->
<style>
      <style>
        /* Add custom styles for the payment form */
        #payment-form {
            max-width: 400px;
            margin: 0 auto;
        }
        #card-element {
            margin-bottom: 20px;
        }
        #card-errors {
            color: red;
            margin-bottom: 20px;
        }
        #submit {
            background-color: #007bff;g
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }
    </style>

        <!--breadcrumb section start-->
        <div class="gstore-breadcrumb position-relative z-1 overflow-hidden mt--50">
           <img src="{% static 'index/assets/img/shapes/bg-shape-6_new.png' %}" alt="bg-shape" class="position-absolute start-0 z--1 w-100 bg-shape">
            <img src="{% static 'index/assets/img/shapes/pata-xs_new.svg' %}" alt="pata" class="position-absolute pata-xs z--1 vector-shape">
            <img src="{% static 'index/assets/img/shapes/onion_new.png' %}" alt="onion" class="position-absolute z--1 onion start-0 top-0 vector-shape">
            <img src="{% static 'index/assets/img/shapes/frame-circle_new.svg' %}" alt="frame circle" class="position-absolute z--1 frame-circle vector-shape">
            <img src="{% static 'index/assets/img/shapes/leaf_new.svg' %}" alt="leaf" class="position-absolute z--1 leaf vector-shape">
            <img src="{% static 'index/assets/img/shapes/garlic-white_new.png' %}" alt="garlic" class="position-absolute z--1 garlic vector-shape">
            <img src="{% static 'index/assets/img/shapes/roll-1_new.png' %}" alt="roll" class="position-absolute z--1 roll vector-shape">
            <img src="{% static 'index/assets/img/shapes/roll-2_new.png' %}" alt="roll" class="position-absolute z--1 roll-2 vector-shape">
            <img src="{% static 'index/assets/img/shapes/pata-xs_new.svg' %}" alt="roll" class="position-absolute z--1 pata-xs-2 vector-shape">
            <img src="{% static 'index/assets/img/shapes/tomato-half_new.svg' %}" alt="tomato" class="position-absolute z--1 tomato-half vector-shape">
            <img src="{% static 'index/assets/img/shapes/tomato-slice_new.svg' %}" alt="tomato" class="position-absolute z--1 tomato-slice vector-shape">
            <img src="{% static 'index/assets/img/shapes/cauliflower_new.png' %}" alt="tomato" class="position-absolute z--1 cauliflower vector-shape">
            <img src="{% static 'index/assets/img/shapes/leaf-gray_new.png' %}" alt="tomato" class="position-absolute z--1 leaf-gray vector-shape">
              <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="breadcrumb-content">
                            <h2 class="mb-2 text-center">Check Out Page</h2>
                            <nav>
                                <ol class="breadcrumb justify-content-center">
                                    <li class="breadcrumb-item fw-bold" aria-current="page"><a href="index.html">Home</a></li>
                                    <li class="breadcrumb-item fw-bold" aria-current="page">Page</li>
                                    <li class="breadcrumb-item fw-bold" aria-current="page">Check Out</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--breadcrumb section end-->

        <!--checkout section start-->
        <div class="checkout-section ptb-120">
            <div class="container">
                <div class="row g-4">
                    <div class="col-xl-8">
                        <div class="checkout-steps">
                            <div class="d-flex justify-content-between">

                                <h4 class="mb-5">Shipment Address</h4>
                            </div>
                            <div class="row g-4">

                                                                               <form action="/save_ship_address/" method="POST" enctype="multipart/form-data">{% csrf_token %}
                                                    <div class="row g-4">
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>First Name</label>
                                                                <input type="text" placeholder="Saiful" name="firstname" id="fname" value="{{d.first_name}}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Last Name</label>
                                                                <input type="text" placeholder="Talukdar" name="lastname" id="lname" value="{{d.last_name}}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <div class="label-input-field">
                                                                <label>Street Address</label>
                                                                <input type="text" placeholder="Mountain View, California, United States" name="street" id="s_address" value="{{d.street_address}}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Mobile</label>
                                                                <input type="tel" placeholder="Phone Number" name="mobile" id="mobile" value="{{d.mobile}}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Email</label>
                                                                <input type="email" placeholder="Your Email" name="email" id="email" value="{{d.email}}">
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4">
                                                            <div class="label-input-field">
                                                                <label>State</label>
                                                                <input type="text" placeholder="Dhaka" name="state" id="state" value="{{d.state}}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="label-input-field">
                                                                <label>EirCode</label>
                                                                <input type="text" placeholder="123456" name="eircode" id="eircode" value="{{d.Eircode}}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="mt-6 d-flex">
                                                        <button type="submit" class="btn btn-secondary btn-md me-3">Use this Address</button>
                                                    </div>
                                                </form>


                            </div>


                                            <div class="checkbox d-flex align-items-center gap-2">
                                            <div class="theme-checkbox flex-shrink-0">
                                                <input type="checkbox" id="billing-info" onclick="bill_same_ship()">
                                                <span class="checkbox-field"><i class="fa-solid fa-check"></i></span>
                                            </div>
                                            <label for="billing-info">Billing same as Shipping address</label>
                                        </div>
                            <div class="checkbox d-flex align-items-center gap-2">
                                            <div class="theme-checkbox flex-shrink-0">
                                                <input type="checkbox" id="billing-info" onclick="bill_new_address()">
                                                <span class="checkbox-field"><i class="fa-solid fa-check"></i></span>
                                            </div>
                                            <label for="billing-info">Use Another Address for Billing</label>
                                        </div>
                            <form  style="display:none;" id="billing" action="/save_bill_address/" method="POST" enctype="multipart/form-data">{% csrf_token %}
                                                    <div class="row g-4">
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>First Name</label>
                                                                <input type="text" placeholder="Saiful" name="firstname">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Last Name</label>
                                                                <input type="text" placeholder="Talukdar" name="lastname">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <div class="label-input-field">
                                                                <label>Street Address</label>
                                                                <input type="text" placeholder="Mountain View, California, United States" name="street">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Mobile</label>
                                                                <input type="tel" placeholder="Phone Number" name="mobile">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="label-input-field">
                                                                <label>Email</label>
                                                                <input type="email" placeholder="Your Email" name="email">
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4">
                                                            <div class="label-input-field">
                                                                <label>State</label>
                                                                <input type="text" placeholder="Dhaka" name="state">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="label-input-field">
                                                                <label>EirCode</label>
                                                                <input type="text" placeholder="123456" name="eircode">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="mt-6 d-flex">
                                                        <button type="submit" class="btn btn-secondary btn-md me-3">Use this Address</button>
                                                    </div>
                                                </form>
                                                  </div>


                        <!--add address modal start-->
                        <!-- Modal -->

                    </div>
                    <div class="col-xl-4">
                        <div class="checkout-sidebar">
                            <div class="sidebar-widget checkout-sidebar py-6 px-4 bg-white rounded-2">
                                <div class="widget-title d-flex">
                                    <h5 class="mb-0 flex-shrink-0">Order Summery</h5>
                                    <span class="hr-line w-100 position-relative d-block align-self-end ms-1"></span>
                                </div>
                                <table class="sidebar-table w-100 mt-5">
                                    <tr>
                                        <td>Items({{total_items}}):</td>
                                        <td class="text-end">€{{item_price}}</td>
                                    </tr>
<!--                                     <tr>-->
<!--                                        <td>Voucher Discount:</td>-->
<!--                                        <td class="text-end">€{{voucher_discount}}</td>-->
<!--                                    </tr>-->
                                    <tr>
                                        <td>Shipping & handling:</td>
                                        <td class="text-end">€{{ship_charge}}</td>
                                    </tr>

                                </table>
                                <span class="sidebar-spacer d-block my-4 opacity-50"></span>
                                <div class="d-flex align-items-center justify-content-between">
                                    <h6 class="mb-0 fs-md">Total</h6>
                                    <h6 class="mb-0 fs-md">€{{total_after_ship}}</h6>
                                </div>
  <form  id="payment-form" method="POST" enctype="multipart/form-data">{% csrf_token %}
                        <input type="hidden" value="{{d.id}}" name="ship">

                                    <input type="hidden" value="{{currency}}" name="currency">
                                    <input type="hidden" value="{{total_items}}" name="total_items">
                                    <input type="hidden" value="{{item_price}}" name="item_price">
                                    <input type="hidden" value="{{ship_charge}}" name="ship_charge">
                                    <input type="hidden" value="{{total_after_ship}}" name="total_after_ship">
                                    <input type="hidden" value="{{discount}}" name="discount">
                                    <input type="hidden" name="payment_id" id="payment_id" value="{{payment_id}}">
      <br>
      <br>
        <div id="card-element">
            <!-- A Stripe Element will be inserted here. -->
        </div>
                                    <p class="mt-3 mb-0 fs-xs"> Do not refresh this page until payment complete</p>

        <!-- Used to display form errors. -->
        <div id="card-errors" role="alert"></div>
      {% if not d %}
                                        <p>Complete shipping address for Payment</p>
      {% endif %}
                                <button class="btn btn-primary btn-md rounded mt-6 w-100" id="submit" >Place Order via Online</button>
  </form>
      <form action="/cod_invoice/" method="post" enctype="multipart/form-data" class="mb-2">{% csrf_token %}
                         <input type="hidden" value="{{razorpay_order_id}}" name="razorpay_order_id">
                                    <input type="hidden" value="{{razorpay_amount}}" name="razorpay_amount">
                                    <input type="hidden" value="{{currency}}" name="currency">
                                    <input type="hidden" value="{{total_items}}" name="total_items">
                                    <input type="hidden" value="{{item_price}}" name="item_price">
                                    <input type="hidden" value="{{ship_charge}}" name="ship_charge">
                                    <input type="hidden" value="{{total_after_ship}}" name="total_after_ship">
                                    <input type="hidden" value="{{discount}}" name="discount">
                                    <input type="hidden" value="{{d.id}}" name="ship">

                                    <input type="hidden" name="payment_id" value="{{payment_id}}">

                                <button class="btn btn-primary btn-md rounded mt-6 w-100" >Place Order Cash On Delivery</button>
                                </form>
                                    <p class="mt-3 mb-0 fs-xs">By Placing your order your agree to our company <a href="#">Privacy-policy</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--checkout section end-->


<!--footer section start-->
        <div class="footer-curve position-relative overflow-hidden">
            <span class="position-absolute section-curve-wrapper top-0 h-100"
                  data-background="{% static 'index/assets/img/shapes/section-curve.png' %}"></span>
        </div>
        <footer class="gshop-footer position-relative pt-8 bg-dark z-1 overflow-hidden">
            <img alt="tomato" class="position-absolute z--1 tomato vector-shape"
                 src="{% static 'index/assets/img/shapes/tomato_new.svg' %}">
            <img src="{% static 'index/assets/img/shapes/pata-lg_new.svg' %}" alt="pata" class="position-absolute z--1 pata-lg vector-shape">
            <img src="{% static 'index/assets/img/shapes/pata-xs_new.svg' %}" alt="pata" class="position-absolute z--1 pata-xs vector-shape">
            <img src="{% static 'index/assets/img/shapes/frame-circle_new.svg' %}" alt="frame" class="position-absolute z--1 frame-circle vector-shape">
            <img src="{% static 'index/assets/img/shapes/leaf_new.svg' %}" alt="leaf" class="position-absolute z--1 leaf vector-shape">
            <!--shape right -->
            <img src="{% static 'index/assets/img/shapes/leaf_new.svg' %}" alt="pata" class="position-absolute leaf-2 z--1 vector-shape">
            <img src="{% static 'index/assets/img/shapes/pata-xs_new.svg' %}" alt="pata" class="position-absolute pata-xs-2 z--1 vector-shape">
            <img src="{% static 'index/assets/img/shapes/tomato-slice_new.svg' %}" alt="tomato slice" class="position-absolute tomato-slice vector-shape z--1">
            <img src="{% static 'index/assets/img/shapes/tomato-half_new.svg' %}" alt="tomato" class="position-absolute tomato-half z--1 vector-shape">
             <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-5 col-lg-6">
                        <div class="gshop_subscribe_form text-center">
                            <h4 class="text-white gshop-title">Subscribe to the GOMART
                                <mark class="p-0 position-relative text-secondary bg-transparent">New Arrivals <img
                                        alt="border line" class="position-absolute border-line"
                                        src="{% static 'index/assets/img/shapes/border-line.svg' %}"></mark>
                                <br class="d-none d-sm-block">& Other Information.
                            </h4>
                            <form action="/add-subscription/"
                                  class="mt-5 d-flex align-items-center bg-white rounded subscribe_form" method="POST">
                                {% csrf_token %}
                                <input class="form-control" name="email" placeholder="Enter Email Address" type="email" required>
                                <button type="submit" class="btn btn-primary flex-shrink-0">Subscribe Now</button>
                            </form>
                        </div>
                    </div>
                </div>
                <span class="gradient-spacer my-8 d-block"></span>

            </div>
            <div class="footer-copyright pt-120 pb-3">
                <span class="gradient-spacer d-block mb-3"></span>
                <div class="container">
                    <div class="row align-items-center g-3">
                        <div class="col-lg-4">
                            <div class="copyright-text">
                                <p class="mb-0 text-white">&copy; All rights reserved Made by <a class="text-secondary"
                                                                                                 href="#">GoMart</a></p>
                            </div>
                        </div>
                        <div class="col-lg-4 d-none d-lg-block">
                            <div class="logo-wrapper text-center">
                                <a class="logo" href="index.html"><img alt="logo" class="img-fluid"
                                                                       src="{% static 'index/assets/img/logo_new.png' %}"
                                                                       width="150"></a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </footer>

        <div class="mobile-toolbar d-block d-md-none d-lg-none">
            <div class="d-table table-layout-fixed w-100">
                <a class="d-table-cell mobile-toolbar-item mobile-menu-toggle" href="#">
                    <span class="mobile-toolbar-icon"><i class="fas fa-bars"></i></span><span
                class="mobile-toolbar-label">Category
            </span>
                </a>
                <div class="gshop-header-search dropdown d-table-cell mobile-toolbar-item">
                    <button class="header-icon" type="button" data-bs-toggle="dropdown">
                        <span class="mobile-toolbar-icon">
                  <svg width="18" height="23" viewBox="0 0 22 23" fill="none"
                       xmlns="http://www.w3.org/2000/svg">
                      <path d="M9.68859 0.5C4.34645 0.5 0 4.84646 0 10.1886C0 15.5311 4.34645 19.8772 9.68859 19.8772C15.031 19.8772 19.3772 15.5311 19.3772 10.1886C19.3772 4.84646 15.031 0.5 9.68859 0.5ZM9.68859 18.0886C5.33261 18.0886 1.78866 14.5447 1.78866 10.1887C1.78866 5.83266 5.33261 2.28867 9.68859 2.28867C14.0446 2.28867 17.5885 5.83262 17.5885 10.1886C17.5885 14.5446 14.0446 18.0886 9.68859 18.0886Z" fill="#5D6374"/>
                      <path d="M21.7406 20.9824L16.6436 15.8853C16.2962 15.538 15.7338 15.538 15.3865 15.8853C15.0391 16.2323 15.0391 16.7954 15.3865 17.1424L20.4835 22.2395C20.6571 22.4131 20.8845 22.5 21.1121 22.5C21.3393 22.5 21.5669 22.4131 21.7406 22.2395C22.0879 21.8925 22.0879 21.3294 21.7406 20.9824Z" fill="#5D6374"/>
                  </svg>
              </span>
                        <span class="mobile-toolbar-label">Search</span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-start border-0">
                        <form class="search-form d-flex align-items-center" action="#">
                            <input type="text" placeholder="Search products..." class="w-100">
                            <button type="submit" class="submit-icon-btn-secondary"><i class="fa-solid fa-magnifying-glass"></i></button>
                        </form>
                    </div>
                </div>
                <a class="d-table-cell mobile-toolbar-item" href="/my_account/">
                    <span class="mobile-toolbar-icon">
            <svg width="18" height="25" viewBox="0 0 22 25" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.092 11.9546C12.6656 11.9546 14.0281 11.3902 15.1416 10.2766C16.2547 9.16322 16.8193 7.80093 16.8193 6.2271C16.8193 4.65382 16.2549 3.29134 15.1414 2.1776C14.0279 1.0644 12.6654 0.5 11.092 0.5C9.51825 0.5 8.156 1.0644 7.04266 2.17778C5.92931 3.29116 5.36475 4.65363 5.36475 6.2271C5.36475 7.80093 5.92931 9.1634 7.04266 10.2768C8.15636 11.39 9.51879 11.9546 11.092 11.9546ZM8.0281 3.16308C8.88239 2.30877 9.88453 1.89349 11.092 1.89349C12.2993 1.89349 13.3017 2.30877 14.1561 3.16308C15.0104 4.01757 15.4259 5.01992 15.4259 6.2271C15.4259 7.43464 15.0104 8.43681 14.1561 9.2913C13.3017 10.1458 12.2993 10.5611 11.092 10.5611C9.88489 10.5611 8.88275 10.1456 8.0281 9.2913C7.17364 8.43699 6.7582 7.43464 6.7582 6.2271C6.7582 5.01992 7.17364 4.01757 8.0281 3.16308Z"
                        fill="#5D6374" stroke="#5D6374" stroke-width="0.2"/>
                  <path d="M21.1339 18.893C21.1012 18.4201 21.0352 17.9043 20.9379 17.3596C20.8397 16.8108 20.7133 16.292 20.562 15.8178C20.4055 15.3277 20.1931 14.8438 19.9301 14.38C19.6575 13.8986 19.3371 13.4794 18.9776 13.1345C18.6016 12.7736 18.1414 12.4835 17.6091 12.2719C17.0787 12.0614 16.4909 11.9547 15.8621 11.9547C15.6152 11.9547 15.3763 12.0564 14.9151 12.3576C14.6313 12.5433 14.2993 12.7581 13.9287 12.9956C13.6118 13.1982 13.1825 13.3879 12.6523 13.5598C12.135 13.7277 11.6098 13.8129 11.0912 13.8129C10.5729 13.8129 10.0477 13.7277 9.53001 13.5598C9.00034 13.3881 8.57088 13.1984 8.25455 12.9958C7.88747 12.7605 7.55527 12.5457 7.26718 12.3574C6.80634 12.0562 6.56753 11.9545 6.32059 11.9545C5.69163 11.9545 5.10401 12.0614 4.57378 12.2721C4.04189 12.4833 3.58143 12.7734 3.20512 13.1347C2.84561 13.4798 2.52522 13.8988 2.25281 14.38C1.99019 14.8438 1.77758 15.3276 1.62108 15.818C1.46993 16.2922 1.34351 16.8108 1.24533 17.3596C1.14788 17.9035 1.082 18.4195 1.04933 18.8935C1.01722 19.3569 1.00098 19.8393 1.00098 20.3266C1.00098 21.5934 1.40238 22.6189 2.19394 23.3752C2.97572 24.1216 4.00996 24.5 5.26808 24.5H16.9157C18.1735 24.5 19.2077 24.1216 19.9897 23.3752C20.7814 22.6194 21.1828 21.5935 21.1828 20.3264C21.1826 19.8374 21.1662 19.3551 21.1339 18.893ZM19.0123 22.3449C18.4957 22.8381 17.8099 23.0779 16.9155 23.0779H5.26808C4.37354 23.0779 3.68773 22.8381 3.17135 22.3451C2.66474 21.8613 2.41854 21.2008 2.41854 20.3266C2.41854 19.8718 2.43349 19.4229 2.46339 18.9918C2.49255 18.569 2.55216 18.1044 2.64056 17.6108C2.72786 17.1233 2.83896 16.6658 2.9711 16.2516C3.09789 15.8545 3.27082 15.4612 3.48527 15.0824C3.68995 14.7214 3.92544 14.4116 4.18529 14.1621C4.42835 13.9286 4.73471 13.7375 5.0957 13.5942C5.42956 13.4616 5.80476 13.3891 6.21208 13.3781C6.26172 13.4046 6.35012 13.4552 6.49334 13.5488C6.78475 13.7394 7.12064 13.9567 7.49197 14.1946C7.91054 14.4624 8.44981 14.7042 9.09409 14.9128C9.75277 15.1265 10.4245 15.235 11.0913 15.235C11.7581 15.235 12.4301 15.1265 13.0884 14.913C13.7333 14.704 14.2723 14.4624 14.6915 14.1943C15.0715 13.9506 15.3979 13.7395 15.6894 13.5488C15.8326 13.4553 15.921 13.4046 15.9706 13.3781C16.3781 13.3891 16.7533 13.4616 17.0874 13.5942C17.4482 13.7375 17.7545 13.9288 17.9976 14.1621C18.2574 14.4114 18.4929 14.7212 18.6976 15.0826C18.9122 15.4612 19.0854 15.8547 19.212 16.2515C19.3443 16.6662 19.4556 17.1235 19.5427 17.6106C19.6309 18.1052 19.6907 18.5699 19.7199 18.992V18.9924C19.7499 19.4218 19.7651 19.8705 19.7653 20.3266C19.7651 21.201 19.5189 21.8613 19.0123 22.3449Z"
                        fill="#5D6374" stroke="#5D6374" stroke-width="0.2"/>
              </svg>
            </span>
                    <span class="mobile-toolbar-label">Account</span>
                </a>
                <a class="d-table-cell mobile-toolbar-item" href="/cart_user/">
                    <span class="mobile-toolbar-icon mobile-cart-icon">
              <svg width="18" height="25" viewBox="0 0 22 25" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                  <path d="M21.1704 23.9559L19.6264 7.01422C19.5843 6.55156 19.1908 6.19718 18.7194 6.19718H15.5355V4.78227C15.5355 2.14533 13.3583 0 10.6823 0C8.00628 0 5.82937 2.14533 5.82937 4.78227V6.19718H2.6433C2.17192 6.19718 1.77839 6.55156 1.73625 7.01422L0.186259 24.0225C0.163431 24.2735 0.248671 24.5223 0.421216 24.7082C0.593761 24.8941 0.837705 25 1.0933 25H20.2695C20.2702 25 20.2712 25 20.2719 25C20.775 25 21.1826 24.5982 21.1826 24.1027C21.1825 24.0528 21.1784 24.0036 21.1704 23.9559ZM7.65075 4.78227C7.65075 3.1349 9.01071 1.79465 10.6824 1.79465C12.3542 1.79465 13.7142 3.1349 13.7142 4.78227V6.19718H7.65075V4.78227ZM2.08948 23.2055L3.47591 7.99183H5.82937V9.59649C5.82937 10.0921 6.237 10.4938 6.74006 10.4938C7.24313 10.4938 7.65075 10.0921 7.65075 9.59649V7.99183H13.7142V9.59649C13.7142 10.0921 14.1219 10.4938 14.6249 10.4938C15.128 10.4938 15.5356 10.0921 15.5356 9.59649V7.99183H17.8869L19.2733 23.2055H2.08948Z"
                        fill="#5D6374"/>
              </svg>
            </span>
                    <span class="mobile-toolbar-label">Cart</span>
                </a>
            </div>
        </div>
        <div class="offcanvas-left-menu position-fixed">
            <div class="mobile-menu">
                <button class="offcanvas-close"><i class="fa-solid fa-xmark"></i></button>
                <a class="d-inline-block mb-5" href="#"><img alt="logo"
                                                             src="{% static 'index/assets/img/logo_new.png' %}"
                                                             width="100"></a>
                <nav class="mobile-menu-wrapper scrollbar">
                    <ul>
                        {% for i in cat %}
                        <li>
                            <a href="shop-grid.html" class="d-flex align-items-center">
                                <div class="me-2 avatar-icon">
                                    <img alt="vegetables" class="w-100 h-100 rounded-circle" src="{{i.image}}">
                                </div>
                                <span>{{i.name}}</span>
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </nav>
            </div>
        </div> <!--footer section end-->

<!--modal box-->
<div class="modal fade" id="quickview_modal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <button aria-label="Close" class="btn-close float-end" data-bs-dismiss="modal" type="button"></button>
                <div class="gstore-product-quick-view bg-white rounded-3 py-6 px-4">
                    <div class="row align-items-center g-4">
                        <div class="col-xl-6 align-self-end">
                            <div class="quickview-double-slider">
                                <div class="quickview-product-slider swiper">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide text-center">
                                            <img alt="jam" class="img-fluid" src="{{i.image}}">
                                        </div>
                                        <div class="swiper-slide text-center">
                                            <img alt="jam" class="img-fluid" src="{{i.image}}">
                                        </div>
                                        <div class="swiper-slide text-center">
                                            <img alt="jam" class="img-fluid" src="{{i.image}}">
                                        </div>
                                        <div class="swiper-slide text-center">
                                            <img alt="jam" class="img-fluid" src="{{i.image}}">
                                        </div>
                                    </div>
                                </div>
                                <div class="product-thumbnail-slider swiper mt-80">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide product-thumb-single rounded-2 d-flex align-items-center justify-content-center">
                                            <img alt="jam" class="img-fluid"
                                                 src="{% static 'index/assets/img/products/thumb-sm-1.png' %}">
                                        </div>
                                        <div class="swiper-slide product-thumb-single rounded-2 d-flex align-items-center justify-content-center">
                                            <img alt="jam" class="img-fluid"
                                                 src="{% static 'index/assets/img/products/thumb-sm-2.png' %}">
                                        </div>
                                        <div class="swiper-slide product-thumb-single rounded-2 d-flex align-items-center justify-content-center">
                                            <img alt="jam" class="img-fluid"
                                                 src="{% static 'index/assets/img/products/thumb-sm-3.png' %}">
                                        </div>
                                        <div class="swiper-slide product-thumb-single rounded-2 d-flex align-items-center justify-content-center">
                                            <img alt="jam" class="img-fluid"
                                                 src="{% static 'index/assets/img/products/thumb-sm-4.png' %}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="product-info">
                                <h4 class="mt-1 mb-3">{{i.name}}<br> {{i.category.name}}</h4>

                                <div class="pricing mt-2">
                                    <span class="fw-bold fs-xs text-danger">€{{i.gross_total}}</span>

                                </div>
                                <div class="widget-title d-flex mt-4">
                                    <h6 class="mb-1 flex-shrink-0">Description</h6>
                                    <span class="hr-line w-100 position-relative d-block align-self-end ms-1"></span>
                                </div>
                                <p class="mb-3">{{i.description}} </p>

                                <h6 class="fs-md mb-2 mt-3">Weight:</h6>
                                <ul class="product-radio-btn mb-4 d-flex align-items-center gap-2">
                                    <li>
                                        <input checked name="weight" type="radio" value="250g">
                                        <label>150g</label>
                                    </li>
                                    <li>
                                        <input name="weight" type="radio" value="250g">
                                        <label>500g</label>
                                    </li>
                                    <li>
                                        <input name="weight" type="radio" value="250g">
                                        <label>1kg</label>
                                    </li>
                                </ul>
                                <div class="d-flex align-items-center gap-4 flex-wrap">
                                    <div class="product-qty d-flex align-items-center">
                                        <button class="decrese">-</button>
                                        <input type="text" value="01">
                                        <button class="increase">+</button>
                                    </div>
                                    <a class="btn btn-secondary btn-md" href="#"><span class="me-2"><i
                                            class="fa-solid fa-cart-plus"></i></span>Add to Cart</a>
                                </div>
                                <div class="categories mt-4">
                                    <a class="btn btn-outline btn-sm" href="#">Vegetable</a>
                                    <a class="btn btn-outline btn-sm" href="#">Healthy</a>
                                    <a class="btn btn-outline btn-sm" href="#">Organic</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!--scroll bottom to top button start-->
    <button class="scroll-top-btn">
        <i class="fa-regular fa-hand-pointer"></i>
    </button>


<script>
    function bill_new_address(){
    document.getElementById('billing').style.display="block";


    }
    function bill_same_ship(){
    var fname=document.getElementById("fname").value;
    var lname=document.getElementById("lname").value;
    var email=document.getElementById("email").value;
    var mobile=document.getElementById("mobile").value;
    var s_address=document.getElementById("s_address").value;
    var eircode=document.getElementById("eircode").value;
    var state=document.getElementById("state").value;
    $.ajax({
    url:/save_bill_address/,
    data:{
    "fname":fname,"lname":lname,"email":email,"mobile":mobile,"s_address":s_address,"eircode":eircode,"state":state
    },
    success:function(){
    if(data.msg == "success"){
    return true;
    }

    },

    error: function(xhr, status, error) {
        console.error(error);
    }
    })
    }
</script>
<!--<script>-->
<!--    function place_order(){-->
<!--    var ship_id={{d.id}};-->
<!--    var total_items=document.getElementById("lname").value;-->
<!--    var total_price=document.getElementById("email").value;-->
<!--    var ship_charge=document.getElementById("mobile").value;-->
<!--    var price_after_ship=document.getElementById("s_address").value;-->
<!--    var discount=document.getElementById("eircode").value;-->
<!--    var bill_id={{d.id}};-->
<!--     $.ajax({-->
<!--    url:/place_order/,-->
<!--    data:{-->
<!--    "ship_id":ship_id,"total_items":total_items,"total_price":total_price,"ship_charge":ship_charge,-->
<!--    "price_after_ship":price_after_ship,"discount":discount,"bill_id":bill_id-->
<!--    },-->
<!--    success:function(){-->
<!--    if(data.msg == "success"){-->
<!--    return true;-->
<!--    }-->

<!--    },-->

<!--    error: function(xhr, status, error) {-->
<!--        console.error(error);-->
<!--    }-->
<!--    })-->
<!--    }-->
<!--</script>-->

<!-- Razorpay's Javascript code. -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>



<!--<script>-->
<!--    var options = {-->
<!--        "key": "{{ razorpay_merchant_key }}", // Enter the Key ID generated from the Dashboard-->
<!--        "amount": "{{ razorpay_amount }}", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise-->
<!--        "currency": "{{ currency }}",-->
<!--        "name": "test",-->
<!--        "description": "Test Transaction",-->
<!--        "image": "https://example.com/your_logo",-->
<!--        "order_id": "{{razorpay_order_id}}", //This is a sample Order ID. Pass the id obtained in the response of Step 1-->
<!--        "handler": function (response){-->
<!--            $('#pay input[name=payment_id]').val(response.razorpay_payment_id)-->
<!--            document.getElementById('pay').submit();-->
<!--        },-->
<!--        "prefill": {-->
<!--            "name": "",-->
<!--            "email": "",-->
<!--            "contact": ""-->
<!--        },-->
<!--        "notes": {-->
<!--            "address": "Razorpay Corporate Office"-->
<!--        },-->
<!--        "theme": {-->
<!--            "color": "rgb(104,222,238)"-->
<!--        }-->
<!--    };-->
<!--    var rzp1 = new Razorpay(options);-->
<!--    rzp1.on('payment.failed', function (response){-->
<!--        $('#myModal').modal();-->
<!--    });-->
<!--    document.getElementById('rzp-button1').onclick = function(e){-->

<!--        rzp1.open();-->
<!--        e.preventDefault();-->
<!--    }-->
<!--</script>-->

<script src="https://js.stripe.com/v3/"></script>
<script src="https://js.stripe.com/v3/"></script>
<script>
    var stripe = Stripe('pk_test_51PFfzqRvW5dEfnEODLHNkCVdaHh68IH7Cf0ekfDumWdeW0Os0MIQ6oUZTX1j1xvPICdqTbsg1xP9pILb3Lcrnzct00RIz8fwxd'); // Replace with your Stripe publishable key
    var elements = stripe.elements();

    var cardElement = elements.create('card');
    cardElement.mount('#card-element');

    var form = document.getElementById('payment-form');

    // Function to toggle loading state of the button
    function toggleLoading(isLoading) {
        var submitButton = document.getElementById('submit');
        if (isLoading) {
            submitButton.innerHTML = 'Loading...';
            submitButton.disabled = true;
        } else {
            submitButton.innerHTML = 'Pay';
            submitButton.disabled = false;
        }
    }

    form.addEventListener('submit', function(event) {
        event.preventDefault();

        // Toggle loading state
        toggleLoading(true);

        stripe.createPaymentMethod({
            type: 'card',
            card: cardElement,
        }).then(function(result) {
            if (result.error) {
                // Show error to your customer
                var errorElement = document.getElementById('card-errors');
                errorElement.textContent = result.error.message;
                // Toggle loading state back to false
                toggleLoading(false);
            } else {
                // Send payment method ID to your server to process the payment
                var paymentMethodId = result.paymentMethod.id;

                // Send paymentMethodId to your Django backend using fetch or any other method
                fetch('/process_payment/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'  // Include CSRF token for security
                    },
                    body: JSON.stringify({
                        payment_method_id: paymentMethodId,
                        ship:{{d.id}},
                        total_items:{{total_items}},
                        item_price:{{item_price}},
                        ship_charge:{{ship_charge}},
                        total_after_ship:{{total_after_ship}}
                    })
                }).then(response => response.json())
                .then(data => {
                    // Access the id property from the response
                    console.log(data['id']); // or console.log(data.id);
                    // Use the id property here
                    window.location.href = "/payment_success/" + data['id']; // or data.id
                })
                .catch(error => {
                    console.error('Error:', error);
                    // Toggle loading state back to false
                    toggleLoading(false);
                });
            }
        });
    });

</script>
